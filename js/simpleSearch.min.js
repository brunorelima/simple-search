/*!
 * Versão 1.0a
 * Última alteração: 14/02/2020
 * https://brunorelima.github.io/simple-search/
 */
SimpleSearch&&console.warn("Aten\xE7\xE3o, o SimpleSearch foi iniciado mais de uma vez e poder\xE1 ocorrer bugs.");var SimpleSearch=class SimpleSearch{static _getIdentificador(){return this.identificador=null==this.identificador?1:this.identificador+1,this.identificador}constructor(a){this._debug=!0==a.debug,Object.defineProperty(this,"_debug",{configurable:!1,writable:!1}),this._cfg={},this._cfg._nomeClasse="SimpleSearch",this._cfg._logNomeClasse="["+this._cfg._nomeClasse+"]",this._cfg._id=SimpleSearch._getIdentificador(),this._cfg._prefixoDebug=this._cfg._nomeClasse+this._cfg._id+":"+(a.query||a.queryButton||"???")+" | ",Object.freeze(this._cfg),this._logDebug(this._cfg._nomeClasse+" START ",a),this._var={},this._var._paginaAtual=0,this._var._indexAtual=-1,this._var._arrayRegistros=[],this._var._ultimoParametroPesquisado="",this._var._ultimaPalavraPesquisada="-1",this._var._isDesbloqueado=!0,this._var._isBlocked=!1,this._var._autoIniciarStarted=!1,this._prop={},this._prop._query=a.query;var b=a.defaults?a.defaults:this._getConfigDefault(),c=$.extend({},b,a);a.query&&$(a.query).parent().parent().hasClass("simple-search")&&(console.warn("Aten\xE7\xE3o: Foi recriado um componente utilizando a mesma query '"+a.query+"' que foi utilizada anteriormente. "+this._cfg._logNomeClasse),this.destroy());try{if(null==c.query&&null==c.queryButton)throw Error("Informe o nome do 'query' ou do 'queryButton'. ");if(null==c.field&&null==c.tableFields&&null==c.templateField)throw Error("Informe o nome da 'field'. ");if(null==c.url&&null==c.response)throw Error("Informe a 'url' ou 'response'. ")}catch(a){throw this.destroy(),Error("N\xE3o foi poss\xEDvel inicializar o componente. "+this._cfg._logNomeClasse+" "+a.message)}this._prop._url=c.url,this._prop._method=c.method||"GET",this._prop._fieldSizePages=c.fieldSizePages,this._prop._field=c.field,this._prop._fieldId=c.fieldId,this._prop._queryId=c.queryId,this._prop._templateField=c.templateField,this._prop._fieldRecords=c.fieldRecords,this._prop._inputNames=c.inputNames,this._prop._minLength=c.minLength||0,this._prop._defaults=c.defaults,this._prop._defaultValue=c.defaultValue,this._prop._defaultEmptyMsg=c.defaultEmptyMsg,this._prop._tableTitles=c.tableTitles,this._prop._tableFields=c.tableFields,this._prop._tableFieldsTooltips=c.tableFieldsTooltips,this._prop._queryContent=c.queryContent,this._prop._queryContentExterno=!!c.queryContent,this._prop._queryButton=c.queryButton,this._prop._queryForm=c.queryForm,this._prop._fieldPages=c.fieldPages,this._prop._paramSearch=c.paramSearch||$(this._prop._query).attr("name")||"busca",this._prop._delayAutoSearch=c.delayAutoSearch||-1,this._prop._delaySearch=c.delaySearch||200,this._prop._templateComplement=c.templateComplement,this._prop._tableShowSelect=c.tableShowSelect,this._prop._tableKeepOpen=!0==c.tableKeepOpen,this._prop._whenBlurClear=!0==c.whenBlurClear,this._prop._response=c.response,this._prop._tableLastColumn=c.tableLastColumn,this._prop._tableShowClose=c.tableShowClose,this._prop._whenSelectKeepOpen=c.whenSelectKeepOpen,this._prop._whenEnableReset=c.whenEnableReset||!0,this._prop._whenNullSetEmpty=c.whenNullSetEmpty||!1,this._prop._disableSelectRow=c.disableSelectRow||!1,this._prop._data=c.data||function(){return""},this._prop._onselect=c.onselect||function(){},this._prop._onreset=c.onreset||function(){},this._prop._onsuccess=c.onsuccess||function(){return!0},this._prop._oncomplete=c.oncomplete||function(){},this._prop._onerror=c.onerror||function(){},this._prop._onremoveselecteditem=c.onremoveselecteditem||function(){},this._prop._responseChange=c.responseChange||function(a){return a},this._comp={},this._comp._containerAutoComplete="#containerSimpleSearch"+this._cfg._id,this._comp._classResultadoPesquisa="simpleSearchResult",this._comp._classDestinoConteudo="containerResult",this._comp._classItensSelecionados="containerItensSelecionados",this._comp._classComplemento="complemento",this._comp._classLinhaSelecionada="simpleSearchLinhaSelecionada",this._logDebug("container "+this._comp._containerAutoComplete),!0!=this._prop._disableSelectRow&&(this._comp._classLinhaSelecionada=c.tableFields?"info":"active"),this._prop._query?($(this._prop._query).addClass("form-control"),$(this._prop._query).width(""),$(this._prop._query).wrap("<div id='"+this._comp._containerAutoComplete.substring(1)+"' class='simple-search'></div>"),$(this._prop._query).wrap("<div class='input-group'></div>"),$(this._prop._query).after("<span class='input-group-addon btn '>  <span class='glyphicon glyphicon-search text-primary'></span> </span> "),this._prop._templateComplement&&$(this._prop._query).after("<div class='"+this._comp._classComplemento+" form-control' style='display: none; height: auto; resize: none;' readonly ></div>"),$(this._comp._containerAutoComplete).append("<div class='"+this._comp._classDestinoConteudo+"'></div>"),this._prop._inputNames&&$(this._comp._containerAutoComplete).append("<div class='"+this._comp._classItensSelecionados+"'></div>"),$(this._prop._query).attr("autocomplete","off"),$(this._prop._query).keydown(this._acaoPressKey.bind(this)),$(this._prop._query).click($.proxy(function(){$(this._comp._resultadoPesquisa+" ."+this._comp._classLinhaSelecionada).removeClass(this._comp._classLinhaSelecionada)},this))):this._prop._queryButton&&!this._prop._queryContent&&($(this._prop._queryButton).keydown(this._acaoPressKey.bind(this)),$(this._prop._queryButton).parent().parent().wrap("<div id='"+this._comp._containerAutoComplete.substring(1)+"'></div>"),$(this._prop._queryButton).parent().parent().after("<div class='"+this._comp._classDestinoConteudo+"'></div>")),this._prop._queryContent=this._prop._queryContent?this._prop._queryContent:this._comp._containerAutoComplete+" ."+this._comp._classDestinoConteudo,this._comp._resultadoPesquisa=this._prop._queryContent?this._prop._queryContent:this._comp._containerAutoComplete+" ."+this._comp._classResultadoPesquisa,this._comp._destinoItensSelecionados=this._comp._containerAutoComplete+" ."+this._comp._classItensSelecionados,this._prop._inputNames&&-1==this._prop._inputNames.indexOf("[]")&&(this._logDebug("O param\xEAtro 'inputNames' n\xE3o estava no formato de vetor, foi adicionado '[]' no final do nome para fazer a convers\xE3o."),this._prop._inputNames+="[]"),this._adicionaEventos(),this._adicionaValorPadrao(),Object.freeze(this._prop),Object.freeze(this._comp),Object.freeze(this),this._logDebug("function constructor() - END")}_getConfigDefault(){return{fieldId:"id",fieldRecords:"obj.registros",fieldSizePages:"obj.propriedades.qtdPaginasTotal",whenBlurClear:!0,onsuccess:a=>!(a&&a.status&&("erro"==a.status||"warning"==a.status))||(console.error("O servidor respondeu com status de erro."),this._logDebug(a),this._prop._onerror(a),!1),onerror:a=>{$(this._prop._queryContent).html("<p class='text-danger'><strong> Erro na resposta do servidor para o simpleSearch [code 10] </strong></p>"),console.warn(this._cfg._logNomeClasse+" [onerror]",a)}}}_set(a,b){("string"==typeof a||a instanceof String)&&(a=document.querySelector(a)),a&&(a.value=b)}_logDebug(a){this._debug&&console.log(this._cfg._prefixoDebug+a)}_adicionaValorPadrao(){if(this._prop._defaultValue)if(this._prop._defaultValue[0]&&!Array.isArray(this._prop._defaultValue[0])&&this._prop._defaultValue[1]&&!Array.isArray(this._prop._defaultValue[1])){var a=this._prop._defaultValue[2]?this._prop._defaultValue[2]:"";this.select(this._prop._defaultValue[0],this._prop._defaultValue[1],a)}else Array.isArray(this._prop._defaultValue)&&this._prop._defaultValue.forEach(function(a){if(a[0]&&a[1]){var b=a[2]?a[2]:"";this.select(a[0],a[1],b)}},this)}_adicionaEventos(){if(this._logDebug("function _adicionaEventos()"),this._prop._query){$(document).click($.proxy(function(a){""==$(this._prop._queryContent).html()?this._var._isDesbloqueado&&this._prop._whenBlurClear&&$(this._prop._query).val()&&!$(this._comp._resultadoPesquisa).html()&&this._limparConteudo():!$(a.target).hasClass("clk-btn-next")&&!$(a.target).hasClass("clk-btn-prev")&&!$(a.target).attr("data-pagina")&&0==$(a.target).closest(this._comp._containerAutoComplete).length&&!0!=this._prop._tableKeepOpen&&this._limparConteudo()},this)),$(this._prop._query).parent().find(".input-group-addon").click($.proxy(function(){this._acaoBotaoPesquisarOuDesbloquear()},this));var a=this._prop._templateComplement?this._comp._containerAutoComplete+" ."+this._comp._classComplemento:this._prop._query;$(a).dblclick($.proxy(function(){this._desbloquear(!0),this._setComplemento(""),$(this._prop._query).show(),$(this._comp._containerAutoComplete+" ."+this._comp._classComplemento).hide(),$(this._prop._query).focus()},this)),$(this._prop._query).parent().find(".glyphicon").parent().addClass("btn")}else this._prop._queryButton&&$(this._prop._queryButton).click($.proxy(function(){this._var._isDesbloqueado&&this._pesquisar(1)},this));this._prop._queryForm&&null!=$(this._prop._queryForm).find(".search-on-enter")&&($(this._prop._queryForm).find(".search-on-enter").attr("autocomplete","off"),$(this._prop._queryForm).find(".search-on-enter").keydown(this._acaoPressKey.bind(this)))}_removeEventos(){this._logDebug("function _removeEventos()"),this._prop._query?($(this._prop._query).unbind("dblclick"),$(this._prop._query).parent().find(".input-group-addon").unbind("click"),$(this._prop._query).parent().find(".glyphicon").unbind("click"),$(this._prop._query).parent().find(".glyphicon").parent().removeClass("btn")):this._prop._queryButton&&$(this._prop._queryButton).unbind("click")}_desbloquear(a){this._var._isDesbloqueado=!0,$(this._prop._query).removeAttr("readonly"),$(this._prop._query).parent().find(".glyphicon").removeClass("glyphicon-remove").addClass("glyphicon-search"),!0==a&&$(this._prop._query).select(),this._prop._queryId&&$(this._prop._queryId).val("")}_acaoBotaoPesquisarOuDesbloquear(){this._var._isDesbloqueado?this._pesquisar(1):(this._desbloquear(!0),this._setComplemento(""),$(this._prop._query).show(),$(this._comp._containerAutoComplete+" ."+this._comp._classComplemento).hide(),!0==this._prop._whenEnableReset&&this.reset())}_pesquisar(a){if(this._logDebug("function _pesquisar("+a+") - START"),this._var._idTimeoutAutoSearch&&(clearTimeout(this._var._idTimeoutAutoSearch),this._var._autoIniciarStarted=!1),!this._var._idTimeoutSearch)this._var._idTimeoutSearch=window.setTimeout($.proxy(function(){clearTimeout(this._var._idTimeoutSearch),this._var._idTimeoutSearch=null},this),this._prop._delaySearch);else return void this._logDebug("Pesquisa cancelada. O intervalo da \xFAltima pesquisa foi muito pequeno.");if(this._prop._query&&"readonly"==$(this._prop._query).attr("readonly")||!1==this._var._isDesbloqueado)return void(this._var._autoIniciarStarted=!1);if(this._prop._query&&$(this._prop._query).val().length<this._prop._minLength){this._logDebug("Para pesquisar precisa digitar pelo menos "+this._prop._minLength+" caracteres.");var b="<p><strong>Para pesquisar precisa digitar pelo menos "+this._prop._minLength+" caracteres. </strong></p>";return $(this._prop._queryContent).html(b),void(this._var._autoIniciarStarted=!1)}a=a||1;var c="pagina="+a;c+=this._prop._query?"&"+this._prop._paramSearch+"="+$(this._prop._query).val():"",c+=this._prop._queryForm?"&"+$(this._prop._queryForm).serialize():"";var d=this._prop._data&&"function"==typeof this._prop._data?this._prop._data():this._prop._data;c+=d&&""!=d?"&"+jQuery.param(d):"",this._var._ultimaPalavraPesquisada=$(this._prop._query).val(),this._var._ultimoParametroPesquisado=c,this._var._paginaAtual=null==a?this._var._paginaAtual:a,this._prop._response?this._trataRepostaServidor(this._prop._response(a,$(this._prop._query).val())):(this._var._ajax&&this._var._ajax.abort(),this._var._ajax=$.ajax({url:this._prop._url,data:c,dataType:"json",method:this._prop._method,context:this,success:function(a){this._trataRepostaServidor(a)},error:function(a){0!=a.readyState&&console.error(a),$(this._prop._queryContent).html("<p class='text-danger'><strong> Erro na resposta do servidor para o simpleSearch [code 20] </strong></p>"),this._prop._onerror(a)},beforeSend:function(){var a=" <div class='progress' role='progressbar' style='height: 10px;'> <div class='progress-bar progress-bar-striped active' role='progressbar' aria-valuenow='100' aria-valuemin='0' aria-valuemax='100' style='width: 100%' >";a+="<span class='sr-only glyphicon glyphicon-hourglass text-primary'><small><strong>Carregando... </strong></small></span>  </div> </div>",$(this._prop._queryContent).html(a)},complete:function(){this._var._autoIniciarStarted=!1;var a=$(this._prop._queryContent).html();a&&0<a.indexOf("progressbar")&&$(this._prop._queryContent).html(""),this._var._ajax=null}})),this._logDebug("function _pesquisar("+a+") - END")}_trataRepostaServidor(response){response=this._prop._responseChange(response);var continuarExecutando=this._prop._onsuccess(response);if(continuarExecutando){try{var obj=this._prop._fieldRecords?eval("response."+this._prop._fieldRecords):response}catch(a){throw this._logDebug(a),this._logDebug(response),$(this._prop._queryContent).html("<p class='text-danger'><strong> Erro na resposta do servidor para o simpleSearch [code 30] </strong></p>"),this._prop._onerror(response),Error("Par\xE2metro configurado para 'fieldRecords' incorreto. Confira a resposta do servidor. [fieldRecords:"+this._prop._fieldRecords+"]")}if("undefined"==typeof obj)return console.error("Objeto de registros retornados pelo sistema indefinido. Confira se o argumento de 'fieldRecords' est\xE1 configurado correto ou retornou algum erro do servidor. "+this._cfg._logNomeClasse),void this._prop._onerror(response);if(this._var._arrayRegistros=this._prop._fieldRecords&&obj?obj:response.obj,(this._prop._field||this._prop._tableFields||this._prop._templateField)&&(this._prop._templateField||this._prop._tableFields||!this._var._arrayRegistros[0]||null!=this._var._arrayRegistros[0][this._prop._field])||console.error("Valor da 'field' do item est\xE1 indefinido, confira se o parametro passado est\xE1 correto. "+this._cfg._logNomeClasse),this._prop._fieldId&&this._var._arrayRegistros[0]&&null==this._var._arrayRegistros[0][this._prop._fieldId]&&console.error("Valor da 'fieldId' do item est\xE1 indefinido, confira se o parametro passado est\xE1 correto. "+this._cfg._logNomeClasse),!Array.isArray(this._var._arrayRegistros)){var msg="N\xE3o foi retornado uma lista de itens v\xE1lida. ";return this.setMessage("N\xE3o foi retornado uma lista de itens v\xE1lida. "),void console.warn("N\xE3o foi retornado uma lista de itens v\xE1lida. Confira se a configura\xE7\xE3o do componente est\xE1 correta. "+this._cfg._logNomeClasse)}if(null!=this._var._arrayRegistros&&0<this._var._arrayRegistros.length){var htmlSaida="";if(!0==this._prop._tableKeepOpen&&(htmlSaida+="<div> ",this._prop._tableShowClose&&(htmlSaida+="  <div class='text-danger pull-right acao-fechar' aria-hidden='true' title='Fechar tabela' role='button'> <h6> <span class='glyphicon glyphicon-remove text-danger'></span> Fechar </h6> </div> ")),!this._prop._tableFields){htmlSaida+="<ul class='list-group "+this._comp._classResultadoPesquisa+"' style='margin-bottom: 0;'>";var valor="";this._var._arrayRegistros.forEach(function(a){var b=this._prop._inputNames&&0!=$(this._comp._destinoItensSelecionados+" input[value='"+a[this._prop._fieldId]+"']").length?"disabled":"";switch(typeof this._prop._templateField){case"function":valor=this._prop._templateField(a);break;case"string":valor=this._atualizaValoresTemplate(a,this._prop._templateField);break;default:valor=a[this._prop._field];}if(valor=!valor&&this._prop._whenNullSetEmpty?"":valor,this._prop._templateComplement){let b="";b="function"==typeof this._prop._templateComplement?this._prop._templateComplement(a):this._atualizaValoresTemplate(a,this._prop._templateComplement),valor="<strong>"+valor+"</strong> <br/><small>"+b+"</small>"}htmlSaida+="<li class='list-group-item linhaSs "+b+"' role='button' >"+valor+" </li>"},this),htmlSaida+="</ul>"}else{htmlSaida+="<div class='table-responsive simple-search'>",htmlSaida+="<table class='table table-bordered table-striped table-hover "+this._comp._classResultadoPesquisa+"' style='margin-bottom: 0;'>",this._prop._tableTitles&&(htmlSaida+="<tr>",this._prop._tableShowSelect&&(htmlSaida+="<td width='42px'> </td>"),this._prop._tableTitles.forEach(function(a){htmlSaida+="<th> "+a+" </th>"}),this._prop._tableLastColumn&&(htmlSaida+="<th></th>"),htmlSaida+="</tr>");var complementoCss=!0==this._prop._disableSelectRow?"":"role='button'";this._var._arrayRegistros.forEach(function(a){htmlSaida+="<tr class='linhaSs' "+complementoCss+">",this._prop._tableShowSelect&&(htmlSaida+="<td class='text-center'> <span class='glyphicon glyphicon-ok'></span>  </td>");var b="",c="";this._prop._tableFields.forEach(function(d,e){b="function"==typeof d?d(a):0<=d.indexOf(" ")?this._atualizaValoresTemplate(a,d):a[d],b=!b&&this._prop._whenNullSetEmpty?"":b,c=this._prop._tableFieldsTooltips&&this._prop._tableFieldsTooltips[e]?this._prop._tableFieldsTooltips[e]:"",""!=c&&(c=0<=c.indexOf(" ")?this._atualizaValoresTemplate(a,c):this._atualizaValoresTemplate(a,"#"+c+"#"),c=" title='"+c+"'"),htmlSaida+="<td"+c+">"+b+"</td>"},this),this._prop._tableLastColumn&&("function"===this._prop._tableLastColumn||this._prop._tableLastColumn instanceof Function?htmlSaida+="<td> "+this._atualizaValoresTemplate(a,this._prop._tableLastColumn())+" </td>":htmlSaida+="<td> "+this._atualizaValoresTemplate(a,this._prop._tableLastColumn)+" </td>"),htmlSaida+="</tr>"},this),htmlSaida+="</table>",htmlSaida+="</div>"}var qtdPaginasTotal=-1;if(!isNaN(this._prop._fieldSizePages))qtdPaginasTotal=this._prop._fieldSizePages;else try{var aux=eval("response."+this._prop._fieldSizePages)||-1;qtdPaginasTotal=aux}catch(a){console.warn("Erro ao tentar pegar o valor de fieldSizePages. ",a)}var complementoBotaoAnterior=1==this._var._paginaAtual?"disabled":"",complementoBotaoProximo=this._var._paginaAtual==qtdPaginasTotal?"disabled":"";if(qtdPaginasTotal&&1<qtdPaginasTotal){this._var._paginaAtual=this._var._paginaAtual>qtdPaginasTotal+1?qtdPaginasTotal+1:this._var._paginaAtual;var dadosPaginacao=null;try{dadosPaginacao=this._prop._fieldPages?eval("response."+this._prop._fieldPages):null}catch(a){console.warn("Erro ao usar o par\xE2metro 'fieldPages': "+this._prop._fieldPages)}dadosPaginacao?(htmlSaida+="<div class='text-center simple-search'> <div class='btn-group' role='group'> ",htmlSaida+=" <ul class='pagination'> ",dadosPaginacao&&dadosPaginacao.forEach(function(a){htmlSaida+=this._atualizaValoresTemplate(a,"  <li class='#active#' data-pagina='#pagina#' ><a href='javascript:void(0)' data-pagina='#pagina#'>#legenda#</a></li> ")},this),htmlSaida+=" </ul>  ",htmlSaida+="</div></div>"):(htmlSaida+="<div class='btn-group btn-group-justified' role='group'>",htmlSaida+="<div class='btn-group' role='group'> <button type='button' class='btn btn-primary clk-btn-prev' "+complementoBotaoAnterior+"> Anterior </button>  </div>",htmlSaida+="<div class='btn-group' role='group'> <button type='button' class='btn btn-primary clk-btn-next' "+complementoBotaoProximo+"> Pr\xF3xima </button>  </div>",htmlSaida+="</div>")}this._prop._queryContentExterno&&(htmlSaida+="</div> "),$(this._prop._queryContent).html(htmlSaida),!0==this._prop._tableKeepOpen&&($(this._prop._queryContent).undelegate(".acao-fechar","click"),$(this._prop._queryContent).delegate(".acao-fechar","click",this._limparConteudo.bind(this))),!0!=this._prop._disableSelectRow&&($(this._prop._queryContent).undelegate(".linhaSs","click"),$(this._prop._queryContent).delegate(".linhaSs:not(.disabled)","click",this._acaoClickMouse.bind(this))),$(this._comp._resultadoPesquisa).undelegate(".linhaSs","mouseover"),$(this._comp._resultadoPesquisa).delegate(".linhaSs","mouseover",this._acaoMouseOver.bind(this)),$(this._prop._queryContent).undelegate(".clk-btn-prev","click"),$(this._prop._queryContent).delegate(".clk-btn-prev","click",this._voltaPagina.bind(this)),$(this._prop._queryContent).undelegate(".clk-btn-next","click"),$(this._prop._queryContent).delegate(".clk-btn-next","click",this._proximaPagina.bind(this)),$(this._prop._queryContent).undelegate(".pagination li","click"),$(this._prop._queryContent).delegate(".pagination li","click",$.proxy(function(a){var b=$(this._prop._queryContent+" .pagination li").index($(a.currentTarget));if(0<=b){var c=$(this._prop._queryContent+" .pagination li")[b],d=$(c).data("pagina");this._pesquisar(d)}},this))}else this.setMessage(this._prop._defaultEmptyMsg),--this._var._paginaAtual;$(this._prop._query).focus()}else this._logDebug("function _trataRepostaServidor - Quase FIM : continuarExecutando = false");this._prop._oncomplete(response)}_atualizaValoresTemplate(a,b){$.each(a,function(a,c){var d=new RegExp("#"+a+"#","ig");b=b.replace(d,null==c?"":c)});for(var c="",d=b.indexOf("#"),e=(b.match(/#/g)||[]).length;0<=d&&2<=e;)c=b.indexOf("#",d+1),0<c&&(b=b.substring(0,d)+b.substring(c+1)),d=b.indexOf("#"),e=(b.match(/#/g)||[]).length;return b}_selecionaLinha(a){if(!a)return;this._prop._whenSelectKeepOpen||this._limparConteudo();let b="";this._prop._templateComplement&&("function"==typeof this._prop._templateComplement?b=this._prop._templateComplement(a):b=this._atualizaValoresTemplate(a,this._prop._templateComplement)),this.select(a[this._prop._fieldId],a[this._prop._field],b,!0,a),this._prop._onselect(a)}_setComplemento(a){this._prop._templateComplement&&($(this._comp._containerAutoComplete+" ."+this._comp._classComplemento).html(a),$(this._prop._query).hide(),$(this._comp._containerAutoComplete+" ."+this._comp._classComplemento).show())}_geraComplementoElemento(a){return this._prop._inputNames&&a?"<div class='form-control' readonly style='height: auto; font-size: 0.85em;'> "+a+" </div>":""}_acaoClickMouse(a){this._var._indexAtual=$(this._comp._resultadoPesquisa+" .linhaSs").index($(a.currentTarget)),$(this._comp._resultadoPesquisa+" .linhaSs").eq(this._var._indexAtual).hasClass("disabled")||"button"!=$(this._comp._resultadoPesquisa+" .linhaSs").eq(this._var._indexAtual).attr("role")?this.focus():($(this._comp._resultadoPesquisa+" .linhaSs").eq(this._var._indexAtual).addClass("disabled"),this._selecionaLinha(this._var._arrayRegistros[this._var._indexAtual]))}_acaoClickMouseRemoverItem(a){!1==this._var._isBlocked&&($(a.currentTarget).parent().parent().remove(),this._prop._onremoveselecteditem($(a.currentTarget).parent().parent().find("input[type='hidden']").val()))}_acaoMouseOver(a){$(this._comp._resultadoPesquisa+" ."+this._comp._classLinhaSelecionada).removeClass(this._comp._classLinhaSelecionada),$(a.currentTarget).hasClass("disabled")||$(a.currentTarget).addClass(this._comp._classLinhaSelecionada)}_acaoPressKey(a){if(!$(this._prop._query).attr("readonly"))switch(a.keyCode){case 13:this._var._indexAtual=$(this._comp._resultadoPesquisa+" .linhaSs").index($(this._comp._resultadoPesquisa+" ."+this._comp._classLinhaSelecionada)),0<=this._var._indexAtual?(!$(this._comp._resultadoPesquisa+" .linhaSs").eq(this._var._indexAtual).hasClass("disabled")&&($(this._comp._resultadoPesquisa+" .linhaSs").eq(this._var._indexAtual).addClass("disabled"),this._selecionaLinha(this._var._arrayRegistros[this._var._indexAtual])),a.preventDefault()):(this._pesquisar(1),a.preventDefault());break;case 27:this._limparConteudo();break;case 9:!0!=this._prop._tableKeepOpen&&this._var._isDesbloqueado&&this._prop._whenBlurClear&&$(this._prop._query).val()&&this._limparConteudo();break;case 37:this._voltaPagina();break;case 39:this._proximaPagina();break;case 40:this._var._indexAtual=$(this._comp._resultadoPesquisa+" .linhaSs:not(.disabled)").index($(this._comp._resultadoPesquisa+" ."+this._comp._classLinhaSelecionada)),this._var._indexAtual++,$(this._comp._resultadoPesquisa+" ."+this._comp._classLinhaSelecionada).removeClass(this._comp._classLinhaSelecionada),$(this._comp._resultadoPesquisa+" .linhaSs:not(.disabled):eq("+this._var._indexAtual+")").addClass(this._comp._classLinhaSelecionada),a.preventDefault();break;case 38:this._var._indexAtual=$(this._comp._resultadoPesquisa+" .linhaSs:not(.disabled)").index($(this._comp._resultadoPesquisa+" ."+this._comp._classLinhaSelecionada)),this._var._indexAtual--,$(this._comp._resultadoPesquisa+" ."+this._comp._classLinhaSelecionada).removeClass(this._comp._classLinhaSelecionada),$(this._comp._resultadoPesquisa+" .linhaSs:not(.disabled):eq("+this._var._indexAtual+")").addClass(this._comp._classLinhaSelecionada),a.preventDefault();break;case 33:this._voltaPagina(),a.preventDefault();break;case 34:this._proximaPagina(),a.preventDefault();break;case 16:break;case 17:break;case 18:break;case 20:break;case 32:break;case 36:break;case 35:break;case 144:break;default:$(this._comp._resultadoPesquisa+" ."+this._comp._classLinhaSelecionada).removeClass(this._comp._classLinhaSelecionada),-1!=this._prop._delayAutoSearch&&(this._var._idTimeoutAutoSearch&&(clearTimeout(this._var._idTimeoutAutoSearch),this._var._autoIniciarStarted=!1),!1==this._var._autoIniciarStarted&&(this._var._autoIniciarStarted=!0,this._var._idTimeoutAutoSearch=window.setTimeout($.proxy(function(){this._pesquisar(1)},this),this._prop._delayAutoSearch)));}}_proximaPagina(){return("-1"!=this._var._ultimaPalavraPesquisada&&this._var._ultimaPalavraPesquisada!=$(this._prop._query).val()||""==this._var._ultimaPalavraPesquisada&&""==$(this._prop._query).val()&&""==$(this._prop._queryContent).html())&&(this._var._paginaAtual=0),this._var._ultimaPalavraPesquisada==$(this._prop._query).val()&&""!=$(this._prop._queryContent).html()&&(0==$(".clk-btn-next").length||0<$(".clk-btn-next[disabled]").length)&&(0==$(".pagination").length||0<$(".pagination li:last-child.active").length)?void this._logDebug("Pesquisa cancelada por usar mesmo termo pesquisado."):void this._pesquisar(this._var._paginaAtual+1)}_voltaPagina(){return this._var._ultimaPalavraPesquisada==$(this._prop._query).val()&&(0==$(".clk-btn-prev").length||0<$(".clk-btn-prev[disabled]").length)&&(0==$(".pagination").length||0<$(".pagination li:first-child.active").length)?void this._logDebug("Pesquisa cancelada por usar mesmo termo pesquisado."):void this._pesquisar(1<this._var._paginaAtual?this._var._paginaAtual-1:1)}_limparConteudo(){this._logDebug("function _limparConteudo() - START");var a=document.querySelector(this._prop._queryContent);a&&(a.innerHTML=""),this._var._ultimoParametroPesquisado="",this._var._ultimaPalavraPesquisada="-1",this._var._paginaAtual=0,this._prop._whenBlurClear&&this._prop._queryId&&!$(this._prop._queryId).val()&&(this._set(this._prop._query,""),this._set(this._prop._queryId,"")),this._logDebug("function _limparConteudo() - END")}reset(){this._logDebug("function reset() - START"),this._var._isBlocked||($(this._prop._query).val(""),$(this._comp._destinoItensSelecionados).html(""),this._setComplemento(""),this._limparConteudo(),this._desbloquear(!1),$(this._prop._query).show(),$(this._comp._containerAutoComplete+" ."+this._comp._classComplemento).hide()),this._logDebug("function onreset() - START"),this._prop._onreset(),this._logDebug("function onreset() - END"),this._logDebug("function reset() - END")}destroy(){this._logDebug("function destroy()");var a=$(this._prop._query),b=$(this._prop._query).parent().parent();$(this._prop._query).parent().parent().after(a),$(b).remove(),$(this._prop._query).removeClass("form-control"),$(this._prop._query).removeAttr("autocomplete")}select(a,b,c,d,e){if(this._logDebug("function select() - START"),this._prop._templateField&&e&&("function"==typeof this._prop._templateField?b=this._prop._templateField(e):b=this._atualizaValoresTemplate(e,this._prop._templateField)),!this._prop._inputNames)$(this._prop._query).val(b),$(this._prop._query).attr("readonly","readonly"),$(this._prop._query).parent().find(".glyphicon").removeClass("glyphicon-search").addClass("glyphicon-remove"),this._prop._queryId&&$(this._prop._queryId).val(a?a:""),this._prop._query&&(this._var._isDesbloqueado=!1),c&&this._setComplemento("<strong>"+b+"</strong><br>"+c);else if(this._prop._inputNames&&0==$(this._comp._destinoItensSelecionados+" input[value='"+a+"']").length){var f="<div> <div class='input-group input-group-sm'> ";this._prop._templateComplement?(f+="<input type='hidden' name='"+this._prop._inputNames+"' value='"+a+"' />",f+="<input type='hidden' name='_"+this._prop._inputNames+"' value='"+b+"' />",f+="<div class='form-control' style='height: auto; resize: none;' readonly > <strong>"+b+"</strong><br>"+c+"</div>"):(f+="<input type='hidden' name='"+this._prop._inputNames+"' value='"+a+"' />",f+="<input class='form-control' name='_"+this._prop._inputNames+"' value='"+b+"' readonly />"),f+="<span class='input-group-addon btn itemSs'>  <span class='glyphicon glyphicon-remove text-primary'></span> </span> ",f+=" </div> </div>",$(this._comp._destinoItensSelecionados).append(f),!0==d&&$(this._prop._query).focus(),$(this._comp._destinoItensSelecionados).undelegate(".itemSs","click"),$(this._comp._destinoItensSelecionados).delegate(".itemSs","click",this._acaoClickMouseRemoverItem.bind(this))}this._logDebug("function select() - END")}disabled(){this._logDebug("function disabled()"),this._var._isBlocked=!0,this._prop._query?($(this._prop._query).attr("readonly","readonly"),$(this._prop._query).parent().find(".glyphicon").removeClass("glyphicon-search").removeClass("glyphicon-remove").addClass("glyphicon-lock")):this._prop._queryButton&&$(this._prop._queryButton).attr("disabled","disabled"),this._prop._inputNames&&$(this.getContainer()).find(".itemSs").attr("disabled","disabled"),this._removeEventos()}enabled(){this._logDebug("function enabled()"),this._var._isBlocked=!1,this._adicionaEventos(),this._prop._query?this._var._isDesbloqueado?($(this._prop._query).removeAttr("readonly"),$(this._prop._query).parent().find(".glyphicon").removeClass("glyphicon-lock").addClass("glyphicon-search").removeClass("glyphicon-remove"),this._prop._inputNames&&$(this.getContainer()).find(".itemSs").removeAttr("disabled")):$(this._prop._query).parent().find(".glyphicon").removeClass("glyphicon-lock").removeClass("glyphicon-search").addClass("glyphicon-remove"):this._prop._queryButton&&$(this._prop._queryButton).removeAttr("disabled")}focus(){this._logDebug("function focus()"),$(this._prop._query).focus()}search(a){this._logDebug("function search()"),this._pesquisar(a)}getContainer(){return this._comp._containerAutoComplete}disableRowByIndex(a){var b=this._prop._queryContent?this._prop._queryContent:this.getContainer();$(b+" .linhaSs").eq(a).removeAttr("role"),$(b+" .linhaSs").eq(a).find(".glyphicon-ok").hide(),$(b+" .linhaSs").eq(a).addClass("disabled")}setMessage(a){var b=a?a:"Nenhum resultado encontrado para o termo informado.";$(this._prop._queryContent).html("<p style='margin-top: 2px;'><strong> "+b+" </strong></p>")}};